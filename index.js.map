{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst API_KEY = '46816597-00495df87fc70f19aecba95fd';\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nasync function fetchImages(query, page = 1, per_page = 15) { \n    const searchParams = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page,\n    });\n    const url = `https://pixabay.com/api/?${searchParams}`;\n\n    loader.style.display = 'block';\n\n    try {\n        const response = await fetch(url);\n        if (!response.ok) {\n            throw new Error(response.status);\n        }\n        const data = await response.json();\n        loader.style.display = 'none';\n        \n        if (data.hits.length === 0) {\n            iziToast.error({\n                title: 'No pictures found',\n                message: 'Sorry, there are no images matching your search query. Please try again.',\n                messageColor: 'black',\n                messageSize: '14px',\n                position: 'topCenter',\n                timeout: 2500,\n                closeOnClick: true,\n        \n            });\n        }\n        return data;\n    } catch (e) {\n        console.log(e);\n        loader.style.display = 'none';\n        iziToast.error({ title: 'Error', message: 'Failed to fetch images' });\n    }\n}\n\nexport default fetchImages;\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { gallery } from '../main'\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionData: \"alt\",\n});\n\n\n\nfunction renderGallery(pics) {\n    const markup = pics\n        .map(\n            ({\n                webformatURL,\n                largeImageURL,\n                tags,\n                likes,\n                views,\n                comments,\n                downloads,\n            }) => {\n                return `\n                <li class='gallery-item'>\n                <a href='${largeImageURL}'>\n                <img src='${webformatURL}' alt='${tags}'>\n                </a>\n         <div class='info'>\n         \n<div class='info-item'>\n  <p class='main'>Likes</p>\n  <p>${likes}</p>\n</div>\n\n<div class='info-item'>\n  <p class='main'>Views</p>\n  <p>${views}</p>\n</div>\n\n<div class='info-item'>\n  <p class='main'>Comments</p>\n  <p>${comments}</p>\n</div>\n\n<div class='info-item'>\n  <p class='main'>Downloads</p>\n  <p>${downloads}</p>\n</div>\n        </div>\n\n                </li> \n                `;\n            }\n        )\n        .join('');\n    gallery.innerHTML = markup;\n\n    lightbox.refresh();\n}\n\nexport default renderGallery;","import fetchImages from './js/pixabay-api';\nimport renderGallery from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.js-search');\nexport const gallery = document.querySelector('.gallery');\nconst loadMore = document.querySelector(\".js-load-more\");\nconst loader = document.querySelector('.loader');\n\n// loadMore.addEventListener(\"click\", onLoadMore);\n\nlet query = '';\nlet page = 1;\nlet per_page = 15;\n\nform.addEventListener('submit', e => {\n    e.preventDefault();\n    gallery.innerHTML = '';\n    query = e.target.elements.search.value.trim();\n    if (query === '') {\n        iziToast.error({ title: 'Error', message: 'Please enter a search query' });\n        return;\n    }\n    page = 1; \n    loadMore.classList.add('load-more-hidden'); \n    fetchRenderImages();\n});\n\nconst smoothScroll = () => {\n    const galleryItem = document.querySelector('.gallery-item');\n    if (galleryItem) {\n        const itemHeight = galleryItem.getBoundingClientRect().height;\n        window.scrollBy({\n            top: itemHeight * 2,\n            behavior: 'smooth',\n        });\n    }\n};\n\nconst fetchRenderImages = async () => {\n    try {\n        loader.style.display = 'block';\nconst data = await fetchImages(query,page,per_page);\nloader.style.display = 'none';\n\nif (data.hits.length === 0) {\n    iziToast.info({ message: 'Sorry, no results found. Try again.' });\n    loadMore.classList.add('load-more-hidden');\n    return;\n}\n\nrenderGallery(data.hits);\nsmoothScroll();\npage +=1;\n\nif (data.hits.length < per_page || page > Math.ceil(data.totalHits / per_page)) {\n    loadMore.classList.add('load-more-hidden');\n    iziToast.info({ message: 'We are sorry, but you have reached the end of search results.' });\n} else {\n    loadMore.classList.remove('load-more-hidden');\n}\n} catch (error) {\n    loader.style.display = 'none';\n    loadMore.classList.add('load-more-hidden');\n    iziToast.error({ title: 'Error', message: 'Failed to load images' });\n}\n};\n\nloadMore.addEventListener('click', fetchRenderImages);\n\n"],"names":["API_KEY","loader","fetchImages","query","page","per_page","url","response","data","iziToast","e","lightbox","SimpleLightbox","renderGallery","pics","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallery","form","loadMore","fetchRenderImages","smoothScroll","galleryItem","itemHeight"],"mappings":"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"}